<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<title>Training Implementation Guide</title>
<style>
body { font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; line-height: 1.6; }
h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
h2 { color: #34495e; border-bottom: 2px solid #95a5a6; padding-bottom: 8px; margin-top: 30px; }
h3 { color: #2c3e50; margin-top: 20px; }
code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; color: #c7254e; }
pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
pre code { background: transparent; color: #f8f8f2; padding: 0; }
table { border-collapse: collapse; width: 100%; margin: 20px 0; }
table th { background: #3498db; color: white; padding: 12px; text-align: left; }
table td { padding: 10px; border: 1px solid #ddd; }
table tr:nth-child(even) { background: #f9f9f9; }
.print-btn { background: #3498db; color: white; border: none; padding: 12px 30px; font-size: 1em; border-radius: 5px; cursor: pointer; margin: 20px 0; }
.print-btn:hover { background: #2980b9; }
@media print { .no-print { display: none; } h1 { page-break-before: always; } h1:first-of-type { page-break-before: avoid; } }
</style>
</head>
<body>
<div class=no-print style="background:#fff3cd;border:2px solid #ffc107;padding:20px;text-align:center;margin-bottom:30px;">
<strong>To save as PDF:</strong> Press Ctrl+P (Windows) or Cmd+P (Mac), then select Save as PDF
<br><button class=print-btn onclick="window.print()">Print to PDF</button>
</div>
<h1 id="training-implementation-flow-architecture-guide">ğŸš€ Training Implementation Flow &amp; Architecture Guide</h1>

<p><strong>Smart ML Assistant - Complete Training Pipeline Documentation</strong></p>

<hr />

<h2 id="table-of-contents">ğŸ“‹ Table of Contents</h2>

<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#architecture-diagram">Architecture Diagram</a></li>
<li><a href="#component-flow">Component Flow</a></li>
<li><a href="#detailed-training-flow">Detailed Training Flow</a></li>
<li><a href="#code-implementation">Code Implementation</a></li>
<li><a href="#integration-points">Integration Points</a></li>
<li><a href="#data-flow">Data Flow</a></li>
<li><a href="#api-endpoints">API Endpoints</a></li>
</ol>

<hr />

<h2 id="overview">ğŸ¯ Overview</h2>

<p>The Smart ML Assistant implements a <strong>complete end-to-end ML training pipeline</strong> that integrates:
- Multi-source dataset discovery (Kaggle + HuggingFace)
- AI-powered model recommendations
- AutoML training with real-time progress tracking
- Deployment-ready models</p>

<h3 id="key-features">Key Features:</h3>

<ul>
<li>âœ… Automatic dataset inspection with schema detection</li>
<li>âœ… Auto-detection of target columns</li>
<li>âœ… Real AutoML training using AutoGluon</li>
<li>âœ… Server-Sent Events (SSE) for live progress updates</li>
<li>âœ… Fallback to simulation mode if AutoGluon unavailable</li>
<li>âœ… Production-safe (works with ephemeral filesystems)</li>
</ul>

<hr />

<h2 id="architecture-diagram">ğŸ—ï¸ Architecture Diagram</h2>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Chat.tsx   â”‚  â”‚ DatasetCard  â”‚  â”‚  useTraining â”‚             â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚     Hook     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â”‚ User Query       â”‚ Click Train      â”‚ SSE Connection
          â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND API LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  messages.py     â”‚  â”‚  datasets.py     â”‚  â”‚   automl.py     â”‚  â”‚
â”‚  â”‚  /api/messages   â”‚  â”‚  /api/datasets   â”‚  â”‚  /api/automl    â”‚  â”‚
â”‚  â”‚    /chat         â”‚  â”‚    /inspect      â”‚  â”‚    /train       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                     â”‚
            â”‚                    â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SERVICE LAYER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ml_orchestrator  â”‚  â”‚ dataset_download â”‚  â”‚  gemini_service â”‚  â”‚
â”‚  â”‚   .py            â”‚  â”‚   _service.py    â”‚  â”‚      .py        â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                 â”‚  â”‚
â”‚  â”‚ - recommend()    â”‚  â”‚ - search()       â”‚  â”‚ - analyze()     â”‚  â”‚
â”‚  â”‚ - make_decision()â”‚  â”‚ - download()     â”‚  â”‚ - optimize()    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                     â”‚
            â”‚                    â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXTERNAL SERVICES                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Kaggle     â”‚  â”‚ HuggingFace  â”‚  â”‚    Gemini    â”‚             â”‚
â”‚  â”‚     API      â”‚  â”‚     Hub      â”‚  â”‚     API      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA STORAGE                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      MongoDB                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚   datasets   â”‚  â”‚    models    â”‚  â”‚   messages   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚  collection  â”‚  â”‚  collection  â”‚  â”‚  collection  â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  File System / Storage                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚  CSV Files   â”‚  â”‚ Trained      â”‚  â”‚  AutoGluon   â”‚       â”‚   â”‚
â”‚  â”‚  â”‚  (datasets)  â”‚  â”‚  Models      â”‚  â”‚   Cache      â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<hr />

<h2 id="component-flow">ğŸ”„ Component Flow</h2>

<h3 id="1-dataset-discovery-flow">1. Dataset Discovery Flow</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Query  â”‚ "Find sentiment analysis datasets"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ messages.py: /api/messages/chat             â”‚
â”‚                                              â”‚
â”‚ 1. Analyze query with Gemini                â”‚
â”‚ 2. Detect: needs_kaggle_search = True       â”‚
â”‚ 3. Extract search terms                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dataset_download_service.search_all_sources()â”‚
â”‚                                              â”‚
â”‚ 1. Optimize query (fix typos)               â”‚
â”‚ 2. Search Kaggle API (parallel)             â”‚
â”‚ 3. Search HuggingFace API (parallel)        â”‚
â”‚ 4. Rank by semantic relevance               â”‚
â”‚ 5. Return top 5 combined                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response to User                             â”‚
â”‚                                              â”‚
â”‚ - Top 5 datasets with metadata               â”‚
â”‚ - Relevance scores                           â”‚
â”‚ - Download counts                            â”‚
â”‚ - Source breakdown (Kaggle/HF)              â”‚
â”‚ - Downloadable dataset cards                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<h3 id="2-dataset-inspection-flow">2. Dataset Inspection Flow</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks     â”‚ "Inspect Dataset" or "Add to Collection"
â”‚ dataset card    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ datasets.py: /api/datasets/add-from-kaggle  â”‚
â”‚                                              â”‚
â”‚ 1. Check if Kaggle API configured            â”‚
â”‚ 2. Download dataset to local storage         â”‚
â”‚ 3. Find CSV files in download                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dataset Processing (pandas)                  â”‚
â”‚                                              â”‚
â”‚ 1. Load CSV (first 1000 rows for metadata)  â”‚
â”‚ 2. Generate schema:                          â”‚
â”‚    - Column names                            â”‚
â”‚    - Data types (int, float, object)        â”‚
â”‚    - Null counts                             â”‚
â”‚    - Unique counts                           â”‚
â”‚ 3. Extract sample data (20 rows)            â”‚
â”‚ 4. Auto-detect target column:               â”‚
â”‚    - Match keywords (price, label, etc.)    â”‚
â”‚    - Check user query                        â”‚
â”‚    - Fallback to last column                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save to MongoDB: datasets collection         â”‚
â”‚                                              â”‚
â”‚ {                                            â”‚
â”‚   user_id, name, file_name,                  â”‚
â”‚   row_count, column_count, file_size,        â”‚
â”‚   schema: [...],                             â”‚
â”‚   sample_data: [...],                        â”‚
â”‚   target_column: "detected_column",          â”‚
â”‚   csv_content: "..." (production mode),      â”‚
â”‚   status: "ready"                            â”‚
â”‚ }                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Dataset Card Updated               â”‚
â”‚                                              â”‚
â”‚ âœ“ Shows schema preview                       â”‚
â”‚ âœ“ Shows target column                        â”‚
â”‚ âœ“ "Train Model" button enabled               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<h3 id="3-training-flow-current-implementation">3. Training Flow (Current Implementation)</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User initiates  â”‚ Click "Train Model" button
â”‚ training        â”‚ URL: /?chat=XXX&amp;dataset=YYY&amp;train=true
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Chat.tsx (useEffect)                           â”‚
â”‚                                                           â”‚
â”‚ 1. Parse URL params:                                     â”‚
â”‚    - chat_id                                             â”‚
â”‚    - dataset_id                                          â”‚
â”‚    - train=true flag                                     â”‚
â”‚ 2. Call: handleStartTraining(dataset_id, chat_id)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: useTraining Hook                               â”‚
â”‚                                                           â”‚
â”‚ const startTraining = (datasetId, chatId, onProgress) =&gt; â”‚
â”‚                                                           â”‚
â”‚ 1. Establish SSE connection:                             â”‚
â”‚    EventSource(`/api/automl/train/${datasetId}?          â”‚
â”‚                 chat_id=${chatId}`)                      â”‚
â”‚                                                           â”‚
â”‚ 2. Listen for events:                                    â”‚
â”‚    - onmessage: Parse JSON data                          â”‚
â”‚    - Handle event types: status, progress, error,        â”‚
â”‚      complete                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP GET (SSE Stream)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: automl.py                                        â”‚
â”‚ POST /api/automl/train/{dataset_id}                      â”‚
â”‚                                                           â”‚
â”‚ 1. Validate dataset exists                               â”‚
â”‚ 2. Validate chat exists                                  â”‚
â”‚ 3. Return StreamingResponse(event_generator())           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ async def event_generator(dataset_id, chat_id):          â”‚
â”‚                                                           â”‚
â”‚ PHASE 1: Load Dataset                                    â”‚
â”‚ â”œâ”€ Check dataset metadata in MongoDB                     â”‚
â”‚ â”œâ”€ Verify target_column is set                           â”‚
â”‚ â”œâ”€ Priority 1: Load from csv_content (MongoDB)           â”‚
â”‚ â”‚  â””â”€ Production-safe, works on ephemeral FS             â”‚
â”‚ â”œâ”€ Priority 2: Load from file_path (Development)         â”‚
â”‚ â”‚  â””â”€ Read CSV from disk                                 â”‚
â”‚ â””â”€ Send SSE: "ğŸ“Š Dataset loaded: X rows, Y columns"      â”‚
â”‚                                                           â”‚
â”‚ PHASE 2: Initialize AutoML                               â”‚
â”‚ â”œâ”€ Try: from autogluon.tabular import TabularPredictor  â”‚
â”‚ â”œâ”€ If success: use_autogluon = True                      â”‚
â”‚ â””â”€ If ImportError: use_autogluon = False (simulation)    â”‚
â”‚                                                           â”‚
â”‚ PHASE 3: Data Preparation                                â”‚
â”‚ â”œâ”€ Verify target column exists in DataFrame              â”‚
â”‚ â”œâ”€ Get first 5 rows as sample                            â”‚
â”‚ â”œâ”€ Clean NaN values for JSON serialization               â”‚
â”‚ â””â”€ Save sample to chat as message                        â”‚
â”‚                                                           â”‚
â”‚ PHASE 4A: Real AutoML Training (if available)            â”‚
â”‚ â”œâ”€ Detect task type:                                     â”‚
â”‚ â”‚  â””â”€ Classification: if dtype=object or nunique &lt; 20   â”‚
â”‚ â”‚  â””â”€ Regression: otherwise                              â”‚
â”‚ â”œâ”€ Create TabularPredictor:                              â”‚
â”‚ â”‚  â””â”€ label=target_column                                â”‚
â”‚ â”‚  â””â”€ path=backend/models/{dataset_id}                   â”‚
â”‚ â”‚  â””â”€ problem_type='multiclass' or 'regression'          â”‚
â”‚ â”‚  â””â”€ eval_metric='accuracy' or 'r2'                     â”‚
â”‚ â”œâ”€ Train in executor (non-blocking):                     â”‚
â”‚ â”‚  â””â”€ predictor.fit(train_data=df, time_limit=60,       â”‚
â”‚ â”‚                    presets='medium_quality')           â”‚
â”‚ â”œâ”€ Get leaderboard and best model                        â”‚
â”‚ â””â”€ Calculate metrics:                                    â”‚
â”‚    â””â”€ Classification: accuracy, f1, precision, recall    â”‚
â”‚    â””â”€ Regression: r2_score, MAE, RMSE                    â”‚
â”‚                                                           â”‚
â”‚ PHASE 4B: Simulation Training (fallback)                 â”‚
â”‚ â”œâ”€ Simulate 5 model training steps:                      â”‚
â”‚ â”‚  1. Random Forest (20% progress)                       â”‚
â”‚ â”‚  2. XGBoost (40% progress)                             â”‚
â”‚ â”‚  3. LightGBM (60% progress)                            â”‚
â”‚ â”‚  4. Neural Network (80% progress)                      â”‚
â”‚ â”‚  5. Ensemble (100% progress)                           â”‚
â”‚ â”œâ”€ Each step: send SSE + save message to chat           â”‚
â”‚ â””â”€ Generate random metrics (75-95% accuracy)             â”‚
â”‚                                                           â”‚
â”‚ PHASE 5: Save Model to Database                          â”‚
â”‚ â”œâ”€ Create model document:                                â”‚
â”‚ â”‚  {                                                      â”‚
â”‚ â”‚    user_id, name, base_model,                          â”‚
â”‚ â”‚    dataset_id, task_type,                              â”‚
â”‚ â”‚    metrics: {accuracy, f1, etc.},                      â”‚
â”‚ â”‚    model_path: "backend/models/...",                   â”‚
â”‚ â”‚    uses_real_model: true/false,                        â”‚
â”‚ â”‚    status: "ready"                                     â”‚
â”‚ â”‚  }                                                      â”‚
â”‚ â”œâ”€ Insert into models collection                         â”‚
â”‚ â””â”€ Get model_id                                          â”‚
â”‚                                                           â”‚
â”‚ PHASE 6: Complete &amp; Notify                               â”‚
â”‚ â”œâ”€ Format result message with metrics                    â”‚
â”‚ â”œâ”€ Save final message to chat                            â”‚
â”‚ â””â”€ Send SSE complete event:                              â”‚
â”‚    {                                                      â”‚
â”‚      type: "complete",                                   â”‚
â”‚      message: "Training Complete!",                      â”‚
â”‚      model_id, best_model, metrics                       â”‚
â”‚    }                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ SSE Events Stream
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Event Handlers                                 â”‚
â”‚                                                           â”‚
â”‚ eventSource.onmessage = (event) =&gt; {                     â”‚
â”‚   const data = JSON.parse(event.data);                   â”‚
â”‚                                                           â”‚
â”‚   switch(data.type) {                                    â”‚
â”‚     case "status":                                       â”‚
â”‚       â””â”€ addMessage(data.message)                        â”‚
â”‚     case "progress":                                     â”‚
â”‚       â””â”€ updateProgressBar(data.progress)                â”‚
â”‚     case "error":                                        â”‚
â”‚       â””â”€ showError(data.message)                         â”‚
â”‚     case "complete":                                     â”‚
â”‚       â”œâ”€ eventSource.close()                             â”‚
â”‚       â”œâ”€ addMessage(data.message)                        â”‚
â”‚       â”œâ”€ updateURL to remove ?train=true                 â”‚
â”‚       â””â”€ showToast("Training Complete!")                 â”‚
â”‚   }                                                       â”‚
â”‚ }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<hr />

<h2 id="code-implementation">ğŸ’» Code Implementation</h2>

<h3 id="file-structure">File Structure</h3>

<pre><code>backend/app/
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ automl.py           â­ Main training endpoint
â”‚   â”œâ”€â”€ messages.py         ğŸ“¨ Chat &amp; query analysis
â”‚   â”œâ”€â”€ datasets.py         ğŸ“¦ Dataset inspection
â”‚   â””â”€â”€ training_jobs.py    ğŸ”„ Background job tracking
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ml_orchestrator.py  ğŸ¤– Model recommendations
â”‚   â”œâ”€â”€ gemini_service.py   âœ¨ AI query analysis
â”‚   â”œâ”€â”€ dataset_download_service.py  ğŸ“¥ Multi-source search
â”‚   â””â”€â”€ huggingface_service.py       ğŸ¤— HF integration
â”‚
â””â”€â”€ models/
    â””â”€â”€ mongodb_models.py   ğŸ—„ï¸ Database schemas

frontend/client/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Chat.tsx            ğŸ’¬ Main chat interface
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useChat.ts          ğŸ“¡ Chat state management
â”‚   â””â”€â”€ useTraining.ts      ğŸ¯ Training SSE handler
â”‚
â””â”€â”€ components/
    â”œâ”€â”€ KaggleDatasetCard.tsx      ğŸ“Š Kaggle dataset UI
    â”œâ”€â”€ HuggingFaceDatasetCard.tsx ğŸ¤— HF dataset UI
    â””â”€â”€ DownloadableDatasetCard.tsx ğŸ“¦ Unified dataset card
</code></pre>

<h3 id="key-code-sections">Key Code Sections</h3>

<h4 id="1-training-endpoint-backendapproutersautomlpy">1. Training Endpoint (<code>backend/app/routers/automl.py</code>)</h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Line 407-451: Main training endpoint</span>
<span class="nd">@router</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/train/</span><span class="si">{dataset_id}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">train_model</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">current_user</span><span class="p">:</span> <span class="n">User</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_current_user</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start AutoML training with SSE progress updates&quot;&quot;&quot;</span>

    <span class="c1"># Validate dataset and chat</span>
    <span class="c1"># Return StreamingResponse with event_generator()</span>

    <span class="k">return</span> <span class="n">StreamingResponse</span><span class="p">(</span>
        <span class="n">event_generator</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">),</span>
        <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;text/event-stream&quot;</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;Cache-Control&quot;</span><span class="p">:</span> <span class="s2">&quot;no-cache&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;keep-alive&quot;</span><span class="p">,</span>
            <span class="s2">&quot;X-Accel-Buffering&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre>
</div>

<h4 id="2-event-generator-backendapproutersautomlpy">2. Event Generator (<code>backend/app/routers/automl.py</code>)</h4>

<div class="codehilite">
<pre><span></span><code><span class="c1"># Line 17-404: SSE event stream generator</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">event_generator</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yields SSE events:</span>
<span class="sd">    - data: {&quot;type&quot;: &quot;status&quot;, &quot;message&quot;: &quot;Loading...&quot;}</span>
<span class="sd">    - data: {&quot;type&quot;: &quot;progress&quot;, &quot;message&quot;: &quot;Training...&quot;, &quot;progress&quot;: 50}</span>
<span class="sd">    - data: {&quot;type&quot;: &quot;complete&quot;, &quot;model_id&quot;: &quot;...&quot;, &quot;metrics&quot;: {...}}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Phase 1: Load dataset from MongoDB or filesystem</span>
    <span class="c1"># Phase 2: Initialize AutoGluon (or fallback to simulation)</span>
    <span class="c1"># Phase 3: Prepare data and show sample</span>
    <span class="c1"># Phase 4: Train model (real or simulated)</span>
    <span class="c1"># Phase 5: Save model to database</span>
    <span class="c1"># Phase 6: Send completion event</span>
</code></pre>
</div>

<h4 id="3-frontend-training-hook-frontendclientsrchooksusetrainingts">3. Frontend Training Hook (<code>frontend/client/src/hooks/useTraining.ts</code>)</h4>

<div class="codehilite">
<pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useTraining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isTraining</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsTraining</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">startTraining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nx">datasetId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<span class="w">    </span><span class="nx">chatId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<span class="w">    </span><span class="nx">onProgress</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span>
<span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setIsTraining</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create SSE connection</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">eventSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EventSource</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`</span><span class="si">${</span><span class="nx">API_URL</span><span class="si">}</span><span class="sb">/api/automl/train/</span><span class="si">${</span><span class="nx">datasetId</span><span class="si">}</span><span class="sb">?chat_id=</span><span class="si">${</span><span class="nx">chatId</span><span class="si">}</span><span class="sb">`</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Handle events</span>
<span class="w">    </span><span class="nx">eventSource</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">      </span><span class="nx">onProgress</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;complete&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;error&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">eventSource</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">        </span><span class="nx">setIsTraining</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">eventSource</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">isTraining</span><span class="p">,</span><span class="w"> </span><span class="nx">startTraining</span><span class="w"> </span><span class="p">};</span>
<span class="p">};</span>
</code></pre>
</div>

<h4 id="4-chat-integration-frontendclientsrcpageschattsx">4. Chat Integration (<code>frontend/client/src/pages/Chat.tsx</code>)</h4>

<div class="codehilite">
<pre><span></span><code><span class="c1">// Line 29-76: Initialize chat and handle training</span>
<span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">initializeChat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">urlParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">existingChatId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urlParams</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;chat&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">datasetId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urlParams</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;dataset&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">shouldTrain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urlParams</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">shouldTrain</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">datasetId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">handleStartTraining</span><span class="p">(</span><span class="nx">datasetId</span><span class="p">,</span><span class="w"> </span><span class="nx">existingChatId</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">initializeChat</span><span class="p">();</span>
<span class="p">},</span><span class="w"> </span><span class="p">[]);</span>

<span class="c1">// Line 79-101: Training handler</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">handleStartTraining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">datasetId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">currentChatId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">startTraining</span><span class="p">(</span><span class="nx">datasetId</span><span class="p">,</span><span class="w"> </span><span class="nx">currentChatId</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;status&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;progress&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">addMessage</span><span class="p">({</span>
<span class="w">        </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="kt">data.message</span><span class="p">,</span>
<span class="w">        </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;complete&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">addMessage</span><span class="p">({</span>
<span class="w">        </span><span class="nx">role</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="kt">data.message</span><span class="p">,</span>
<span class="w">        </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">        </span><span class="nx">metadata</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">model_id</span><span class="o">:</span><span class="w"> </span><span class="kt">data.model_id</span><span class="p">,</span>
<span class="w">          </span><span class="nx">metrics</span><span class="o">:</span><span class="w"> </span><span class="kt">data.metrics</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">};</span>
</code></pre>
</div>

<hr />

<h2 id="integration-points">ğŸ”— Integration Points</h2>

<h3 id="1-dataset-discovery-training">1. Dataset Discovery â†’ Training</h3>

<pre><code>messages.py (line 159-251)
â”œâ”€ Detects: ML task keywords (classify, train, predict)
â”œâ”€ Searches datasets via dataset_download_service
â”œâ”€ Returns metadata with downloadable_datasets
â””â”€ Frontend shows "Add to Collection" button
    â”‚
    â–¼
datasets.py (line 487-678)
â”œâ”€ Downloads dataset from Kaggle/HuggingFace
â”œâ”€ Inspects and generates schema
â”œâ”€ Auto-detects target column
â””â”€ Saves to MongoDB with status="ready"
    â”‚
    â–¼
Chat.tsx (line 270-285)
â””â”€ Shows "Start Fine-tuning" button for ready datasets
    â”‚
    â–¼
automl.py (line 407)
â””â”€ Starts training via SSE
</code></pre>

<h3 id="2-model-recommendation-training">2. Model Recommendation â†’ Training</h3>

<pre><code>ml_orchestrator.py (line 28-102)
â”œâ”€ recommend_models(task_description, dataset_id)
â”œâ”€ Searches HuggingFace models
â”œâ”€ Ranks by downloads/likes
â””â”€ Returns top 3 with confidence scores
    â”‚
    â–¼
messages.py (line 255-336)
â”œâ”€ Calls ml_orchestrator when ML task detected
â”œâ”€ Formats recommendations for user
â””â”€ Shows cost/time estimates
    â”‚
    â–¼
automl.py
â””â”€ Uses recommended model for training
</code></pre>

<h3 id="3-training-deployment">3. Training â†’ Deployment</h3>

<pre><code>automl.py (line 354-373)
â”œâ”€ Training completes successfully
â”œâ”€ Saves to models collection:
â”‚  {
â”‚    model_id, base_model, metrics,
â”‚    model_path, task_type, status="ready"
â”‚  }
â””â”€ Returns model_id to frontend
    â”‚
    â–¼
training_jobs.py (line 481-540)
â””â”€ deploy_trained_model(job_id)
    â”œâ”€ Creates deployment record
    â”œâ”€ Generates API endpoint
    â””â”€ Returns: /api/deployed/{id}/predict
</code></pre>

<hr />

<h2 id="data-flow">ğŸ“Š Data Flow</h2>

<h3 id="mongodb-collections">MongoDB Collections</h3>

<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATASETS Collection                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                               â”‚
â”‚   _id: ObjectId,                                                â”‚
â”‚   user_id: ObjectId,                                            â”‚
â”‚   name: "House Prices Dataset",                                 â”‚
â”‚   source: "kaggle" | "huggingface" | "upload",                 â”‚
â”‚   kaggle_ref: "username/dataset-name",                          â”‚
â”‚   file_name: "housing.csv",                                     â”‚
â”‚   row_count: 20640,                                             â”‚
â”‚   column_count: 10,                                             â”‚
â”‚   file_size: 1234567,                                           â”‚
â”‚   status: "ready" | "pending" | "error",                       â”‚
â”‚   schema: [                                                     â”‚
â”‚     {name: "longitude", dtype: "float64", null_count: 0},       â”‚
â”‚     {name: "latitude", dtype: "float64", null_count: 0},        â”‚
â”‚     {name: "price", dtype: "float64", null_count: 0}            â”‚
â”‚   ],                                                            â”‚
â”‚   sample_data: [{longitude: -122.23, latitude: 37.88, ...}],   â”‚
â”‚   target_column: "price",                                       â”‚
â”‚   csv_content: "longitude,latitude,price\n..." (production),    â”‚
â”‚   download_path: "./data/kaggle/..." (development),             â”‚
â”‚   uploaded_at: ISODate                                          â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Used by
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODELS Collection                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                               â”‚
â”‚   _id: ObjectId,                                                â”‚
â”‚   user_id: ObjectId,                                            â”‚
â”‚   name: "House Prices - WeightedEnsemble",                      â”‚
â”‚   base_model: "WeightedEnsemble_L2",                            â”‚
â”‚   dataset_id: ObjectId (references datasets),                   â”‚
â”‚   task_type: "regression",                                      â”‚
â”‚   status: "ready",                                              â”‚
â”‚   metrics: {                                                    â”‚
â”‚     r2_score: 0.8234,                                           â”‚
â”‚     mae: 45234.56,                                              â”‚
â”‚     rmse: 62345.78                                              â”‚
â”‚   },                                                            â”‚
â”‚   model_path: "backend/models/65f3a.../",                       â”‚
â”‚   uses_real_model: true,                                        â”‚
â”‚   created_at: ISODate                                           â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Referenced in
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MESSAGES Collection                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                               â”‚
â”‚   _id: ObjectId,                                                â”‚
â”‚   chat_id: ObjectId,                                            â”‚
â”‚   role: "assistant",                                            â”‚
â”‚   content: "Training Complete! Accuracy: 82.34%",               â”‚
â”‚   query_type: "ml_agent",                                       â”‚
â”‚   metadata: {                                                   â”‚
â”‚     model_id: ObjectId,                                         â”‚
â”‚     metrics: {...},                                             â”‚
â”‚     best_model: "WeightedEnsemble_L2"                           â”‚
â”‚   },                                                            â”‚
â”‚   timestamp: ISODate                                            â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<hr />

<h2 id="api-endpoints">ğŸŒ API Endpoints</h2>

<h3 id="training-endpoints">Training Endpoints</h3>

<pre><code>POST /api/automl/train/{dataset_id}
â”œâ”€ Query Params: chat_id (required)
â”œâ”€ Auth: Bearer token required
â”œâ”€ Response: text/event-stream (SSE)
â””â”€ Events:
   â”œâ”€ {type: "status", message: "Loading dataset..."}
   â”œâ”€ {type: "progress", message: "Training 1/5", progress: 20}
   â””â”€ {type: "complete", model_id: "...", metrics: {...}}

GET /api/datasets/{dataset_id}
â”œâ”€ Returns: Dataset details with schema and sample data
â””â”€ Used to verify target column before training

POST /api/datasets/inspect
â”œâ”€ Body: {dataset_id, user_query}
â”œâ”€ Downloads dataset if not present
â”œâ”€ Generates schema and detects target column
â””â”€ Updates dataset status to "ready"

POST /api/ml/models/recommend
â”œâ”€ Body: {task_type, dataset_id, constraints}
â”œâ”€ Returns: Top 3 model recommendations with scores
â””â”€ Used before training for model selection
</code></pre>

<h3 id="dataset-discovery-endpoints">Dataset Discovery Endpoints</h3>

<pre><code>POST /api/messages/chat
â”œâ”€ Body: {chat_id, content, role: "user"}
â”œâ”€ Analyzes query with Gemini
â”œâ”€ Searches datasets if needed
â””â”€ Returns: AI response with dataset suggestions

POST /api/messages/agent
â”œâ”€ Same as /chat but uses advanced agent mode
â”œâ”€ Direct API search for datasets
â””â”€ Better for explicit dataset requests

POST /api/datasets/search-all
â”œâ”€ Body: {query, optimize_query: true}
â”œâ”€ Searches Kaggle + HuggingFace
â”œâ”€ Ranks by semantic relevance
â””â”€ Returns: {datasets: [...], total_found, kaggle_count, hf_count}
</code></pre>

<hr />

<h2 id="training-scenarios">ğŸ¯ Training Scenarios</h2>

<h3 id="scenario-1-real-automl-training">Scenario 1: Real AutoML Training</h3>

<pre><code>Prerequisites:
âœ“ AutoGluon installed (pip install autogluon)
âœ“ Dataset with target column selected
âœ“ Sufficient disk space for model cache

Flow:
1. User clicks "Train Model"
2. Backend loads dataset from MongoDB
3. Creates TabularPredictor with AutoGluon
4. Trains for 60 seconds (quick mode)
5. Evaluates models and selects best one
6. Saves model to: backend/models/{dataset_id}/
7. Returns real metrics (accuracy, f1, etc.)

Result:
âœ“ Deployable model saved to disk
âœ“ Real predictions available via API
âœ“ Leaderboard with all models tried
</code></pre>

<h3 id="scenario-2-simulation-mode-training">Scenario 2: Simulation Mode Training</h3>

<pre><code>Prerequisites:
âœ— AutoGluon not installed
âœ“ Dataset with target column selected

Flow:
1. User clicks "Train Model"
2. Backend detects AutoGluon unavailable
3. Simulates 5 training steps (2 seconds each)
4. Generates realistic random metrics
5. No model saved to disk
6. Returns simulated metrics

Result:
âœ“ Demo-ready for UI/UX testing
âœ“ Fast completion (10 seconds)
âœ— No real model for predictions
</code></pre>

<h3 id="scenario-3-production-training-ephemeral-fs">Scenario 3: Production Training (Ephemeral FS)</h3>

<pre><code>Prerequisites:
âœ“ Production environment (Render, Heroku, etc.)
âœ“ CSV content stored in MongoDB
âœ“ AutoGluon installed

Flow:
1. Backend loads csv_content from MongoDB
2. Creates DataFrame from in-memory string
3. Trains model (model_path on ephemeral disk)
4. Saves model metadata to MongoDB
5. Model files lost on container restart

Note: For persistent models in production:
- Use S3/GCS to store model files
- Or use model-as-a-service (HuggingFace Inference API)
</code></pre>

<hr />

<h2 id="debugging-monitoring">ğŸ” Debugging &amp; Monitoring</h2>

<h3 id="log-points">Log Points</h3>

<div class="codehilite">
<pre><span></span><code><span class="c1"># automl.py - Key log points</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUTOML] Loading dataset: </span><span class="si">{</span><span class="n">dataset_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>          <span class="c1"># Line 26</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUTOML] Dataset loaded: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> rows&quot;</span><span class="p">)</span>         <span class="c1"># Line 102</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUTOML] AutoML loaded successfully&quot;</span><span class="p">)</span>             <span class="c1"># Line 129</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUTOML] Using simulation mode&quot;</span><span class="p">)</span>                  <span class="c1"># Line 132</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUTOML] Training complete: </span><span class="si">{</span><span class="n">best_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>        <span class="c1"># Line 233</span>
</code></pre>
</div>

<h3 id="sse-event-tracking">SSE Event Tracking</h3>

<div class="codehilite">
<pre><span></span><code><span class="c1">// Frontend - Track all events</span>
<span class="nx">eventSource</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;[SSE]&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;[SSE Type]&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;[SSE Message]&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<h3 id="mongodb-queries">MongoDB Queries</h3>

<div class="codehilite">
<pre><span></span><code><span class="c1">// Check dataset status</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">datasets</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nx">_id</span><span class="o">:</span><span class="w"> </span><span class="nx">ObjectId</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)})</span>

<span class="c1">// Check trained models</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="nx">user_id</span><span class="o">:</span><span class="w"> </span><span class="nx">ObjectId</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">)}).</span><span class="nx">sort</span><span class="p">({</span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">})</span>

<span class="c1">// Check training messages</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
<span class="w">  </span><span class="nx">chat_id</span><span class="o">:</span><span class="w"> </span><span class="nx">ObjectId</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">$regex</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Training&quot;</span><span class="p">}</span>
<span class="p">}).</span><span class="nx">sort</span><span class="p">({</span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">})</span>
</code></pre>
</div>

<hr />

<h2 id="performance-considerations">ğŸ“ˆ Performance Considerations</h2>

<h3 id="training-time">Training Time</h3>

<table>
<thead>
<tr>
  <th>Dataset Size</th>
  <th>Model Type</th>
  <th>Training Time</th>
  <th>Cost (GPU)</th>
</tr>
</thead>
<tbody>
<tr>
  <td>&lt; 1K rows</td>
  <td>AutoML Quick</td>
  <td>1-2 min</td>
  <td>$0.01</td>
</tr>
<tr>
  <td>1K-10K rows</td>
  <td>AutoML Medium</td>
  <td>5-10 min</td>
  <td>$0.08</td>
</tr>
<tr>
  <td>10K-100K rows</td>
  <td>AutoML Full</td>
  <td>30-60 min</td>
  <td>$0.50</td>
</tr>
<tr>
  <td>&gt; 100K rows</td>
  <td>Distributed</td>
  <td>2-4 hours</td>
  <td>$4.00</td>
</tr>
</tbody>
</table>

<h3 id="optimization-tips">Optimization Tips</h3>

<ol>
<li><p><strong>Dataset Loading</strong></p>

<ul>
<li>Use <code>nrows=1000</code> for inspection</li>
<li>Store csv_content in MongoDB for production</li>
<li>Use encoding fallback (utf-8 â†’ latin-1 â†’ ignore)</li>
</ul></li>
<li><p><strong>Training</strong></p>

<ul>
<li>Set <code>time_limit=60</code> for quick demos</li>
<li>Use <code>presets='medium_quality'</code> for balance</li>
<li>Run in executor to avoid blocking event loop</li>
</ul></li>
<li><p><strong>Memory Management</strong></p>

<ul>
<li>Delete DataFrames after use</li>
<li>Call <code>gc.collect()</code> after training</li>
<li>Monitor with <code>log_memory_usage()</code></li>
</ul></li>
</ol>

<hr />

<h2 id="testing-checklist">âœ… Testing Checklist</h2>

<h3 id="pre-training-tests">Pre-Training Tests</h3>

<ul>
<li>[ ] Dataset exists in MongoDB</li>
<li>[ ] Dataset status is "ready"</li>
<li>[ ] Target column is set</li>
<li>[ ] CSV content or download_path is available</li>
<li>[ ] User has permission to access dataset</li>
</ul>

<h3 id="during-training-tests">During Training Tests</h3>

<ul>
<li>[ ] SSE connection established</li>
<li>[ ] Progress events received every 1-2 seconds</li>
<li>[ ] Messages saved to chat collection</li>
<li>[ ] Memory usage stays under limit</li>
<li>[ ] No event loop blocking (health check responds)</li>
</ul>

<h3 id="post-training-tests">Post-Training Tests</h3>

<ul>
<li>[ ] Model saved to models collection</li>
<li>[ ] model_id returned to frontend</li>
<li>[ ] Metrics are realistic (not NaN or Infinity)</li>
<li>[ ] Chat shows completion message</li>
<li>[ ] SSE connection closed properly</li>
</ul>

<hr />

<h2 id="next-steps">ğŸš€ Next Steps</h2>

<h3 id="immediate-improvements">Immediate Improvements</h3>

<ol>
<li>Add model deployment API</li>
<li>Implement model predictions endpoint</li>
<li>Add training job queue for multiple users</li>
<li>Store models in S3/GCS for production</li>
</ol>

<h3 id="future-enhancements">Future Enhancements</h3>

<ol>
<li>Support for image/audio datasets</li>
<li>Distributed training for large datasets</li>
<li>Hyperparameter tuning with Optuna</li>
<li>Model comparison dashboard</li>
<li>A/B testing for deployed models</li>
</ol>

<hr />

<h2 id="support-resources">ğŸ“ Support &amp; Resources</h2>

<ul>
<li><strong>GitHub:</strong> https://github.com/harshalingle123/smart-ml-assistant</li>
<li><strong>AutoGluon Docs:</strong> https://auto.gluon.ai/stable/tutorials/</li>
<li><strong>SSE Guide:</strong> https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events</li>
</ul>

<hr />

<p><strong>Document Version:</strong> 1.0
<strong>Last Updated:</strong> December 2024
<strong>Status:</strong> Production-Ready âœ…</p>

<div class=no-print style="text-align:center;margin-top:50px;color:#666;">
<small>End of Document - Generated from TRAINING_IMPLEMENTATION_GUIDE.md</small>
</div>
</body>
</html>